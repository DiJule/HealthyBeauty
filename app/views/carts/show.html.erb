<div class="cart-page" style="background:#f8f8f8; max-width:900px; margin:2em auto; padding:2em 1em; border-radius:18px; box-shadow:0 2px 16px #e0e0e0;">
  <h1 class="section-title"><i class="fa fa-shopping-cart" style="color:#009a09;"></i> Корзина</h1>
  <% if @cart.cart_items.any? %>
    <table class="pure-table pure-table-bordered" style="width:100%;">
      <thead>
        <tr>
          <th>Товар</th>
          <th>Кількість</th>
          <th>Ціна</th>
          <th>Дія</th>
        </tr>
      </thead>
      <tbody>
        <% @cart.cart_items.each do |item| %>
          <tr>
            <td><%= item.product.name %></td>
            <td>
              <%= form_with(url: cart_item_path(item), method: :patch, local: true) do |f| %>
                <%= f.number_field :quantity, value: item.quantity, min: 1, class: 'pure-input' %>
                <%= f.submit "Оновити", class: "pure-button" %>
              <% end %>
            </td>
            <td><%= item.product.price * item.quantity %> грн</td>
            <td>
              <%= button_to "Видалити", cart_item_path(item), method: :delete, class: "pure-button" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <h3 style="margin-top:2em;">Всього: <%= @cart.total_price %> грн</h3>
    <div style="margin-top:1.5em; display:flex; gap:1em;">
      <%= button_to "Очистити корзину", clear_cart_path, method: :delete, class: "pure-button pure-button-primary" %>
      <%= link_to "Оформити замовлення", new_order_path, class: "pure-button pure-button-primary" %>
    </div>
  <% else %>
    <p>Корзина порожня</p>
  <% end %>
</div>
